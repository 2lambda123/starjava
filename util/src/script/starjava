
#  N.B. the previous line should be blank.
#+
#  Name:
#     starjava

#  Purpose:
#     Locate and run the Starlink installed "java" command with any
#     given arguments.

#  Description:
#     This script should be used as the "java" command when starting a
#     Starlink program. It attempts to make sure that the installed
#     version of the "java" command is used in preference to any
#     others (this increases the likelyhood that programs are only
#     executed by JVMs that they have been tested against).
#
#     The real "java" command is searched for in the following order:
#
#        - `cat $STARLINK/java/jrehome`/bin/java
#        - `cat /star/java/jrehome`/bin/java
#        - anywhere on the PATH
#
#     For development purposes it is possible to overide this
#     behaviour and force the use of a specific "java" command.
#     To do this define the variable STAR_JAVA to point at a "java"
#     command before starting this script.

#  Type of Module:
#     Shell script.

#  Copyright:
#     Copyright (C) 2001-2002 Central Laboratory of the Research Councils

#  Authors:
#     PWD: P.W. Draper (Starlink, Durham University)
#     {enter_new_authors_here}

#  History:
#     24-OCT-2001 (PWD):
#        Original version.
#     {enter_further_changes_here}

#  Bugs:
#     {note_any_bugs_here}

#-

#.

#  Development version of "java".
if test "$STAR_JAVA" != ""; then
   java="$STAR_JAVA"

else

   #  Fall-back "java" is on current PATH.
   java="java"

   #  If $STARLINK is defined then try that. Only look for the JRE
   #  command (only need JDK for development, use "STAR_JAVA" to
   #  override).
   if test "$STARLINK" != ""; then
      if test -r "$STARLINK/java/jrehome"; then
         java="`cat $STARLINK/java/jrehome`/bin/java"
      fi
   fi

   #  If still not changed, look for "java" in the standard installation.
   if test "$java" = "java"; then
      if test -r "/star/java/jrehome"; then
         java="`cat /star/java/jrehome`/bin/java"
      fi
   fi
fi

#  Execute it.
$java ${1+"$@"}
