<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2//EN">
<html>
<head>
<link rel="stylesheet" type="text/css" href="topcat.css" title="Style">
</head>
<body>

<h2>Command-line table copying</h2>

<p>By loading a table in one format and saving it to another
format it is possible to use TOPCAT to convert tabular data between
supported formats (see the <a href="io.html">I/O</a> section for
descriptions of which formats are supported for input and output).

<p>However, if this is all that you want to do, there is a a
more convenient way of doing it from the command line.  This 
avoids the overhead of starting up the GUI, prevents you having to
point and click, and may also make more efficient use of memory.

<p>Tables can be copied between formats using the '<code>tablecopy</code>'
command.  If you have the full Unix installation this can be invoked
using the starjava/bin/tablecopy shell script.
Alternatively, it can be invoked directly from the jar file by doing
<pre>
   java -classpath topcat-full.jar uk.ac.starlink.table.TableCopy
</pre>
(the starjava/lib/topcat/topcat.jar or starjava/lib/table/table.jar 
jarfiles may equally be used instead of topcat-full.jar if you have 
those instead).
Additional comments about using the script or jar file for invocation
in the <a href="invoke.html">Invoking TOPCAT</a> section apply here as well.

<p>The command is straightforward to use.  Typing 
<pre>
   tablecopy -help
</pre>
or equivalently
<pre>
   java -classpath topcat-full.jar uk.ac.starlink.table.TableCopy -help
</pre>
produces the following usage message:
<pre>
   Usage: tablecopy [-ofmt jdbc|fits|votable|text|latex|mirage] in-table out-table
</pre>
The input format is sensed by examining the in-table argument, and the
output format can be supplied using the '-ofmt' flag.  If the -ofmt
flag is not used, the tool may be able to work out the required format
by looking at the out-table argument (for instance one ending in '.FIT'
is assumed to be a FITS table); if not it will fail with an error message
and you will have to specify the format explicitly.
For some output formats the special output name '-' can be used to
represent standard output.

<p>Here are some examples of use:
<ul>
<li>Copy a FITS table to a VOTable:
<pre>
   tablecopy stars.fits stars.xml
</pre>
<li>Print the contents of the fifth &lt;TABLE&gt; element in a VOTable 
document to the screen.
<pre>
   tablecopy -ofmt text vizier.xml#4 -
</pre>
<li>Write the results of an SQL query on a MySQL database
to a FITS binary table:
<pre>
   java -Djdbc.drivers=com.mysql.jdbc.Driver
        -classpath topcat-full.jar:mysql-connector-java-3.0.6-stable-bin.jar
        uk.ac.starlink.table.TableCopy
        -ofmt fits
        "jdbc:mysql://localhost/astro1#SELECT ra, dec, Imag, Kmag FROM dqc"
        wfslist.cat
<pre>
</ul>

</body>
</html>
